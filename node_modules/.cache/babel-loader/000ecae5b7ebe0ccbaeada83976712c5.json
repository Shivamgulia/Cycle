{"ast":null,"code":"import _slicedToArray from\"/Users/shivamgulia/Developer/Microsoft/Green Rides/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useContext,useState}from'react';import Scanner from'../QrScaner/Scanner';import classes from'./AddStudentForm.module.css';import useHttp from'../hooks/use-http';import{addCycle}from'../lib/api';import LoadingSpinner from'../UI/LoadingSpinner';import AuthContext from'../../store/auth-context';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddCycle=function AddCycle(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),scanComplete=_useState4[0],setScanComplete=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),id=_useState6[0],setId=_useState6[1];var authCtx=useContext(AuthContext);var _useHttp=useHttp(addCycle,false),sendRequest=_useHttp.sendRequest,status=_useHttp.status,error=_useHttp.error;var addCycleHandler=function addCycleHandler(data){setId(data);setScanComplete(true);};var submitionHandler=function submitionHandler(event){event.preventDefault();setIsLoading(true);sendRequest({cycle:{cycleid:id,status:'',stdid:''},token:authCtx.token});if(!error){alert('Cycle Added');}// console.log({\n//   cycle: { cycleid: id, status: '', stdid: '' },\n//   token: authCtx.token,\n// });\nsetIsLoading(false);};if(status==='pending'){return/*#__PURE__*/_jsx(\"div\",{className:\"centered\",children:/*#__PURE__*/_jsx(LoadingSpinner,{})});}if(error){return/*#__PURE__*/_jsx(\"p\",{className:\"centered\",children:error});}return/*#__PURE__*/_jsxs(\"section\",{className:classes.auth,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Add Cycle\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitionHandler,children:[!scanComplete&&/*#__PURE__*/_jsx(Scanner,{scan:addCycleHandler}),scanComplete&&/*#__PURE__*/_jsx(\"h3\",{children:id}),/*#__PURE__*/_jsxs(\"div\",{className:classes.actions,children:[!isLoading&&scanComplete&&/*#__PURE__*/_jsx(\"button\",{children:\"Add Cycle\"}),isLoading&&/*#__PURE__*/_jsx(\"p\",{children:\"Sending Request....\"})]})]})]});};export default AddCycle;","map":{"version":3,"sources":["/Users/shivamgulia/Developer/Microsoft/Green Rides/src/components/Admin/AddCycle.js"],"names":["useContext","useState","Scanner","classes","useHttp","addCycle","LoadingSpinner","AuthContext","AddCycle","isLoading","setIsLoading","scanComplete","setScanComplete","id","setId","authCtx","sendRequest","status","error","addCycleHandler","data","submitionHandler","event","preventDefault","cycle","cycleid","stdid","token","alert","auth","actions"],"mappings":"wIAAA,OAASA,UAAT,CAAqBC,QAArB,KAAqC,OAArC,CAEA,MAAOC,CAAAA,OAAP,KAAoB,qBAApB,CACA,MAAOC,CAAAA,OAAP,KAAoB,6BAApB,CACA,MAAOC,CAAAA,OAAP,KAAoB,mBAApB,CACA,OAASC,QAAT,KAAyB,YAAzB,CACA,MAAOC,CAAAA,cAAP,KAA2B,sBAA3B,CACA,MAAOC,CAAAA,WAAP,KAAwB,0BAAxB,C,wFAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACrB,cAAkCP,QAAQ,CAAC,KAAD,CAA1C,wCAAOQ,SAAP,eAAkBC,YAAlB,eACA,eAAwCT,QAAQ,CAAC,KAAD,CAAhD,yCAAOU,YAAP,eAAqBC,eAArB,eACA,eAAoBX,QAAQ,CAAC,IAAD,CAA5B,yCAAOY,EAAP,eAAWC,KAAX,eAEA,GAAMC,CAAAA,OAAO,CAAGf,UAAU,CAACO,WAAD,CAA1B,CAEA,aAAuCH,OAAO,CAACC,QAAD,CAAW,KAAX,CAA9C,CAAQW,WAAR,UAAQA,WAAR,CAAqBC,MAArB,UAAqBA,MAArB,CAA6BC,KAA7B,UAA6BA,KAA7B,CAEA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,IAAD,CAAU,CAChCN,KAAK,CAACM,IAAD,CAAL,CACAR,eAAe,CAAC,IAAD,CAAf,CACD,CAHD,CAKA,GAAMS,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,KAAD,CAAW,CAClCA,KAAK,CAACC,cAAN,GACAb,YAAY,CAAC,IAAD,CAAZ,CACAM,WAAW,CAAC,CACVQ,KAAK,CAAE,CAAEC,OAAO,CAAEZ,EAAX,CAAeI,MAAM,CAAE,EAAvB,CAA2BS,KAAK,CAAE,EAAlC,CADG,CAEVC,KAAK,CAAEZ,OAAO,CAACY,KAFL,CAAD,CAAX,CAIA,GAAI,CAACT,KAAL,CAAY,CACVU,KAAK,CAAC,aAAD,CAAL,CACD,CACD;AACA;AACA;AACA;AACAlB,YAAY,CAAC,KAAD,CAAZ,CACD,CAfD,CAiBA,GAAIO,MAAM,GAAK,SAAf,CAA0B,CACxB,mBACE,YAAK,SAAS,CAAC,UAAf,uBACE,KAAC,cAAD,IADF,EADF,CAKD,CACD,GAAIC,KAAJ,CAAW,CACT,mBAAO,UAAG,SAAS,CAAC,UAAb,UAAyBA,KAAzB,EAAP,CACD,CAED,mBACE,iBAAS,SAAS,CAAEf,OAAO,CAAC0B,IAA5B,wBACE,iCADF,cAEE,cAAM,QAAQ,CAAER,gBAAhB,WACG,CAACV,YAAD,eAAiB,KAAC,OAAD,EAAS,IAAI,CAAEQ,eAAf,EADpB,CAEGR,YAAY,eAAI,oBAAKE,EAAL,EAFnB,cAGE,aAAK,SAAS,CAAEV,OAAO,CAAC2B,OAAxB,WACG,CAACrB,SAAD,EAAcE,YAAd,eAA8B,qCADjC,CAEGF,SAAS,eAAI,0CAFhB,GAHF,GAFF,GADF,CAaD,CAvDD,CAyDA,cAAeD,CAAAA,QAAf","sourcesContent":["import { useContext, useState } from 'react';\n\nimport Scanner from '../QrScaner/Scanner';\nimport classes from './AddStudentForm.module.css';\nimport useHttp from '../hooks/use-http';\nimport { addCycle } from '../lib/api';\nimport LoadingSpinner from '../UI/LoadingSpinner';\nimport AuthContext from '../../store/auth-context';\n\nconst AddCycle = () => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [scanComplete, setScanComplete] = useState(false);\n  const [id, setId] = useState(null);\n\n  const authCtx = useContext(AuthContext);\n\n  const { sendRequest, status, error } = useHttp(addCycle, false);\n\n  const addCycleHandler = (data) => {\n    setId(data);\n    setScanComplete(true);\n  };\n\n  const submitionHandler = (event) => {\n    event.preventDefault();\n    setIsLoading(true);\n    sendRequest({\n      cycle: { cycleid: id, status: '', stdid: '' },\n      token: authCtx.token,\n    });\n    if (!error) {\n      alert('Cycle Added');\n    }\n    // console.log({\n    //   cycle: { cycleid: id, status: '', stdid: '' },\n    //   token: authCtx.token,\n    // });\n    setIsLoading(false);\n  };\n\n  if (status === 'pending') {\n    return (\n      <div className=\"centered\">\n        <LoadingSpinner />\n      </div>\n    );\n  }\n  if (error) {\n    return <p className=\"centered\">{error}</p>;\n  }\n\n  return (\n    <section className={classes.auth}>\n      <h1>Add Cycle</h1>\n      <form onSubmit={submitionHandler}>\n        {!scanComplete && <Scanner scan={addCycleHandler} />}\n        {scanComplete && <h3>{id}</h3>}\n        <div className={classes.actions}>\n          {!isLoading && scanComplete && <button>Add Cycle</button>}\n          {isLoading && <p>Sending Request....</p>}\n        </div>\n      </form>\n    </section>\n  );\n};\n\nexport default AddCycle;\n"]},"metadata":{},"sourceType":"module"}