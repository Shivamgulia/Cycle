{"ast":null,"code":"// import { useContext } from 'react';\n// import AuthContext from '../../store/auth-context';\nconst url = 'https://pacific-fortress-54764.herokuapp.com';\nexport async function rentCycle(props) {\n  let response = await fetch(`${url}/cycles/${props.cycleid}`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token\n    }\n  });\n  let data = await response.json();\n  let userid = data.stdid;\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not fetch quotes.');\n  }\n\n  if (props.role === 'student' && data.status === 'rented') {\n    throw new Error('Cycle already Rented');\n  }\n\n  if (props.role === 'guard' && data.status === '') {\n    throw new Error('Cycle not Rented Yet');\n  }\n\n  let cycleid;\n  if (props.role === 'student') cycleid = props.cycleid;\n  if (props.role === 'guard') cycleid = '';\n  if (props.role === 'student') userid = props.userid;\n  console.log(`${url}/users/${userid}`);\n  response = await fetch(`${url}/users/${userid}`, {\n    method: 'PATCH',\n    body: JSON.stringify({\n      cycleid\n    }),\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token\n    }\n  });\n  data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not fetch quotes.');\n  }\n\n  let user;\n  if (props.role === 'student') user = props.userid;\n  if (props.role === 'guard') user = '';\n  let stat;\n  if (props.role === 'student') stat = 'rented';\n  if (props.role === 'guard') stat = '';\n  response = await fetch(`${url}/cycles/${props.cycleid}`, {\n    method: 'PATCH',\n    body: JSON.stringify({\n      status: stat,\n      stdid: user\n    }),\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token\n    }\n  });\n  data = await response.json();\n\n  if (!response.ok) {\n    // console.log(response);\n    throw new Error(data.message || 'Could not fetch quotes.');\n  }\n\n  console.log('rented');\n  return 'Cycle Rented';\n} //\n\nexport async function addStudent(props) {\n  let response = await fetch(`${url}/users/signup`, {\n    method: 'POST',\n    body: JSON.stringify(props.student),\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token\n    }\n  });\n  let data = await response.json();\n  let userid = data.stdid;\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not fetch quotes.');\n  }\n\n  return 'Student Added';\n} //\n\nexport async function deleteStudent(props) {\n  let response = await fetch(`${url}/users/${props.student.email}`, {\n    method: 'DELETE',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token\n    }\n  });\n  let data = await response.json();\n  let userid = data.stdid;\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not fetch quotes.');\n  }\n\n  return 'Student Added';\n}","map":{"version":3,"sources":["/Users/shivamgulia/Developer/Green Riders/JS/cycle/src/components/lib/api.js"],"names":["url","rentCycle","props","response","fetch","cycleid","method","headers","Authorization","token","data","json","userid","stdid","ok","Error","message","role","status","console","log","body","JSON","stringify","user","stat","addStudent","student","deleteStudent","email"],"mappings":"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","sourcesContent":["// import { useContext } from 'react';\n// import AuthContext from '../../store/auth-context';\n\nconst url = 'https://pacific-fortress-54764.herokuapp.com';\n\nexport async function rentCycle(props) {\n  let response = await fetch(`${url}/cycles/${props.cycleid}`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token,\n    },\n  });\n  let data = await response.json();\n  let userid = data.stdid;\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not fetch quotes.');\n  }\n\n  if (props.role === 'student' && data.status === 'rented') {\n    throw new Error('Cycle already Rented');\n  }\n\n  if (props.role === 'guard' && data.status === '') {\n    throw new Error('Cycle not Rented Yet');\n  }\n\n  let cycleid;\n  if (props.role === 'student') cycleid = props.cycleid;\n  if (props.role === 'guard') cycleid = '';\n\n  if (props.role === 'student') userid = props.userid;\n  console.log(`${url}/users/${userid}`);\n  response = await fetch(`${url}/users/${userid}`, {\n    method: 'PATCH',\n    body: JSON.stringify({ cycleid }),\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token,\n    },\n  });\n\n  data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not fetch quotes.');\n  }\n\n  let user;\n  if (props.role === 'student') user = props.userid;\n  if (props.role === 'guard') user = '';\n\n  let stat;\n  if (props.role === 'student') stat = 'rented';\n  if (props.role === 'guard') stat = '';\n\n  response = await fetch(`${url}/cycles/${props.cycleid}`, {\n    method: 'PATCH',\n    body: JSON.stringify({ status: stat, stdid: user }),\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token,\n    },\n  });\n\n  data = await response.json();\n\n  if (!response.ok) {\n    // console.log(response);\n    throw new Error(data.message || 'Could not fetch quotes.');\n  }\n\n  console.log('rented');\n  return 'Cycle Rented';\n}\n\n//\n\nexport async function addStudent(props) {\n  let response = await fetch(`${url}/users/signup`, {\n    method: 'POST',\n    body: JSON.stringify(props.student),\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token,\n    },\n  });\n  let data = await response.json();\n  let userid = data.stdid;\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not fetch quotes.');\n  }\n\n  return 'Student Added';\n}\n\n//\n\nexport async function deleteStudent(props) {\n  let response = await fetch(`${url}/users/${props.student.email}`, {\n    method: 'DELETE',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token,\n    },\n  });\n  let data = await response.json();\n  let userid = data.stdid;\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not fetch quotes.');\n  }\n\n  return 'Student Added';\n}\n"]},"metadata":{},"sourceType":"module"}