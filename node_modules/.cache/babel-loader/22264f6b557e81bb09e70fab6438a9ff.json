{"ast":null,"code":"const url = 'https://pacific-fortress-54764.herokuapp.com';\nexport async function rentCycle(props) {\n  let response = await fetch(`${url}/cycles/${props.cycleid}`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token\n    }\n  });\n  let data = await response.json();\n  let userid = data.stdid;\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not Rent Cycle');\n  }\n\n  if (props.role === 'student' && data.status === 'rented') {\n    throw new Error('Cycle already Rented');\n  }\n\n  if (props.role === 'guard' && data.status === '') {\n    throw new Error('Cycle not Rented Yet');\n  }\n\n  let cycleid;\n  if (props.role === 'student') cycleid = props.cycleid;\n  if (props.role === 'guard') cycleid = '';\n  if (props.role === 'student') userid = props.userid;\n  response = await fetch(`${url}/users/${userid}`, {\n    method: 'PATCH',\n    body: JSON.stringify({\n      cycleid\n    }),\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token\n    }\n  });\n  data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not Rent Cycle.');\n  }\n\n  let user;\n  if (props.role === 'student') user = props.userid;\n  if (props.role === 'guard') user = '';\n  let stat;\n  if (props.role === 'student') stat = 'rented';\n  if (props.role === 'guard') stat = '';\n  response = await fetch(`${url}/cycles/${props.cycleid}`, {\n    method: 'PATCH',\n    body: JSON.stringify({\n      status: stat,\n      stdid: user\n    }),\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token\n    }\n  });\n  data = await response.json();\n\n  if (!response.ok) {\n    // console.log(response);\n    throw new Error(data.message || 'Could not Rent Cycle.');\n  }\n\n  console.log('rented');\n  return 'Cycle Rented';\n} //\n\nexport async function addStudent(props) {\n  let response = await fetch(`${url}/users/signup`, {\n    method: 'POST',\n    body: JSON.stringify(props.student),\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token\n    }\n  });\n  let data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not Add Student.');\n  }\n\n  return 'Student Added';\n} //\n\nexport async function deleteStudent(props) {\n  let response = await fetch(`${url}/users/${props.student.email}`, {\n    method: 'DELETE',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token\n    }\n  });\n  let data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not Delete Student.');\n  }\n\n  return 'Student Deleted';\n} //\n\nexport async function addCycle(props) {\n  let response = await fetch(`${url}/cycles/add`, {\n    method: 'POST',\n    body: JSON.stringify(props.cycle),\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token\n    }\n  });\n  let data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not Add Cycle.');\n  }\n\n  return 'Student Added';\n}\nexport async function deleteCycle(props) {\n  let response = await fetch(`${url}/cycles/${props.cycleid}`, {\n    method: 'DELETE',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token\n    }\n  });\n  let data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not Delete Cycle');\n  }\n\n  return 'Cycle Deleted';\n} //\n\nexport async function checkUser(props) {\n  let userid = props.userid;\n  response = await fetch('https://pacific-fortress-54764.herokuapp.com/users/login', {\n    method: 'POST',\n    body: JSON.stringify({\n      email: props.email,\n      password: props.password\n    })\n  });\n  data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not Rent Cycle.');\n  }\n\n  props.login(data, data.token, data._id, data.role, data.cycleid, experationTime.toISOString());\n} //\n\nexport async function getCycles(props) {\n  let response = await fetch(`${url}/cycles/all`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token\n    }\n  });\n  let data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not fetch Cycles.');\n  }\n\n  return data;\n}","map":{"version":3,"sources":["/Users/shivamgulia/Developer/Green Riders/JS/cycle/src/components/lib/api.js"],"names":["url","rentCycle","props","response","fetch","cycleid","method","headers","Authorization","token","data","json","userid","stdid","ok","Error","message","role","status","body","JSON","stringify","user","stat","console","log","addStudent","student","deleteStudent","email","addCycle","cycle","deleteCycle","checkUser","password","login","_id","experationTime","toISOString","getCycles"],"mappings":"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","sourcesContent":["const url = 'https://pacific-fortress-54764.herokuapp.com';\n\nexport async function rentCycle(props) {\n  let response = await fetch(`${url}/cycles/${props.cycleid}`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token,\n    },\n  });\n  let data = await response.json();\n  let userid = data.stdid;\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not Rent Cycle');\n  }\n\n  if (props.role === 'student' && data.status === 'rented') {\n    throw new Error('Cycle already Rented');\n  }\n\n  if (props.role === 'guard' && data.status === '') {\n    throw new Error('Cycle not Rented Yet');\n  }\n\n  let cycleid;\n  if (props.role === 'student') cycleid = props.cycleid;\n  if (props.role === 'guard') cycleid = '';\n\n  if (props.role === 'student') userid = props.userid;\n  response = await fetch(`${url}/users/${userid}`, {\n    method: 'PATCH',\n    body: JSON.stringify({ cycleid }),\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token,\n    },\n  });\n\n  data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not Rent Cycle.');\n  }\n\n  let user;\n  if (props.role === 'student') user = props.userid;\n  if (props.role === 'guard') user = '';\n\n  let stat;\n  if (props.role === 'student') stat = 'rented';\n  if (props.role === 'guard') stat = '';\n\n  response = await fetch(`${url}/cycles/${props.cycleid}`, {\n    method: 'PATCH',\n    body: JSON.stringify({ status: stat, stdid: user }),\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token,\n    },\n  });\n\n  data = await response.json();\n\n  if (!response.ok) {\n    // console.log(response);\n    throw new Error(data.message || 'Could not Rent Cycle.');\n  }\n\n  console.log('rented');\n  return 'Cycle Rented';\n}\n\n//\n\nexport async function addStudent(props) {\n  let response = await fetch(`${url}/users/signup`, {\n    method: 'POST',\n    body: JSON.stringify(props.student),\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token,\n    },\n  });\n  let data = await response.json();\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not Add Student.');\n  }\n\n  return 'Student Added';\n}\n\n//\n\nexport async function deleteStudent(props) {\n  let response = await fetch(`${url}/users/${props.student.email}`, {\n    method: 'DELETE',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token,\n    },\n  });\n  let data = await response.json();\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not Delete Student.');\n  }\n\n  return 'Student Deleted';\n}\n\n//\n\nexport async function addCycle(props) {\n  let response = await fetch(`${url}/cycles/add`, {\n    method: 'POST',\n    body: JSON.stringify(props.cycle),\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token,\n    },\n  });\n  let data = await response.json();\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not Add Cycle.');\n  }\n\n  return 'Student Added';\n}\n\nexport async function deleteCycle(props) {\n  let response = await fetch(`${url}/cycles/${props.cycleid}`, {\n    method: 'DELETE',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token,\n    },\n  });\n  let data = await response.json();\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not Delete Cycle');\n  }\n\n  return 'Cycle Deleted';\n}\n\n//\n\nexport async function checkUser(props) {\n  let userid = props.userid;\n  response = await fetch(\n    'https://pacific-fortress-54764.herokuapp.com/users/login',\n    {\n      method: 'POST',\n      body: JSON.stringify({\n        email: props.email,\n        password: props.password,\n      }),\n    }\n  );\n\n  data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not Rent Cycle.');\n  }\n  props.login(\n    data,\n    data.token,\n    data._id,\n    data.role,\n    data.cycleid,\n    experationTime.toISOString()\n  );\n}\n\n//\n\nexport async function getCycles(props) {\n  let response = await fetch(`${url}/cycles/all`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token,\n    },\n  });\n  let data = await response.json();\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not fetch Cycles.');\n  }\n\n  return data;\n}\n"]},"metadata":{},"sourceType":"module"}