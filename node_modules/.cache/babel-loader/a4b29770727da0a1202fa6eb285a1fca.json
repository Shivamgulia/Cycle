{"ast":null,"code":"import _slicedToArray from\"/Users/shivamgulia/Developer/Green Riders/JS/cycle/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,Suspense,useState,useEffect}from'react';import{Route,Switch,Redirect,useHistory}from'react-router-dom';import Layout from'./components/layout/Layout';import LoadingSpinner from'./components/UI/LoadingSpinner';import AdminPage from'./pages/AdminPage';import Cycles from'./pages/Cycles';import AuthContext from'./store/auth-context';// import useHttp from './components/hooks/use-http';\n// import { checkUser } from './components/lib/api';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var NotFound=/*#__PURE__*/React.lazy(function(){return import('./pages/NotFound');});var ProfilePage=/*#__PURE__*/React.lazy(function(){return import('./pages/ProfilePage');});var AuthPage=/*#__PURE__*/React.lazy(function(){return import('./pages/AuthPage');});var Rent=/*#__PURE__*/React.lazy(function(){return import('./pages/Rent');});var Signup=/*#__PURE__*/React.lazy(function(){return import('./pages/Signup');});var authCtx=useContext(AuthContext);var history=useHistory();// let { sendRequest, status, data: cycle, error } = useHttp(checkUser, false);\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),isAdmin=_useState2[0],setIsAdmin=_useState2[1];var loggedIn=authCtx.isLoggedIn;var data=authCtx.data;// useEffect(() => {\n//   if (loggedIn) {\n//     sendRequest({\n//       userid: authCtx.userid,\n//     });\n//     authCtx.login(data, data.token, data._id, data.role, data.cycleid);\n//   }\n// });\nuseEffect(function(){if(authCtx.role==='admin'){setIsAdmin(true);}else{setIsAdmin(false);}},[isAdmin,authCtx.role,authCtx]);return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(Suspense,{fallback:/*#__PURE__*/_jsx(\"div\",{className:\"centered\",children:/*#__PURE__*/_jsx(LoadingSpinner,{})}),children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsxs(Route,{path:\"/\",exact:true,children:[loggedIn&&/*#__PURE__*/_jsx(Redirect,{to:\"/mainPage\"}),!loggedIn&&/*#__PURE__*/_jsx(Redirect,{to:\"/auth\"})]}),/*#__PURE__*/_jsxs(Route,{path:\"/signup\",children:[loggedIn&&/*#__PURE__*/_jsx(Redirect,{to:\"/mainPage\"}),!loggedIn&&/*#__PURE__*/_jsx(Signup,{})]}),/*#__PURE__*/_jsxs(Route,{path:\"/auth\",children:[loggedIn&&/*#__PURE__*/_jsx(Redirect,{to:\"/mainPage\"}),!loggedIn&&/*#__PURE__*/_jsx(AuthPage,{})]}),/*#__PURE__*/_jsxs(Route,{path:\"/mainPage\",children:[loggedIn&&/*#__PURE__*/_jsx(ProfilePage,{user:data}),!loggedIn&&/*#__PURE__*/_jsx(Redirect,{to:\"/auth\"})]}),/*#__PURE__*/_jsxs(Route,{path:\"/rent\",children:[loggedIn&&/*#__PURE__*/_jsx(Rent,{user:data}),!loggedIn&&/*#__PURE__*/_jsx(Redirect,{to:\"/auth\"})]}),/*#__PURE__*/_jsxs(Route,{path:\"/admin\",children:[loggedIn&&isAdmin&&/*#__PURE__*/_jsx(AdminPage,{user:data}),loggedIn&&!isAdmin&&/*#__PURE__*/_jsx(Redirect,{to:\"/auth\"}),!loggedIn&&!isAdmin&&/*#__PURE__*/_jsx(Redirect,{to:\"/auth\"})]}),/*#__PURE__*/_jsx(Route,{path:\"/cycles\",children:/*#__PURE__*/_jsx(Cycles,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",children:/*#__PURE__*/_jsx(NotFound,{})})]})})});}export default App;","map":{"version":3,"sources":["/Users/shivamgulia/Developer/Green Riders/JS/cycle/src/App.js"],"names":["React","useContext","Suspense","useState","useEffect","Route","Switch","Redirect","useHistory","Layout","LoadingSpinner","AdminPage","Cycles","AuthContext","App","NotFound","lazy","ProfilePage","AuthPage","Rent","Signup","authCtx","history","isAdmin","setIsAdmin","loggedIn","isLoggedIn","data","role"],"mappings":"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","sourcesContent":["import React, { useContext, Suspense, useState, useEffect } from 'react';\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom';\n\nimport Layout from './components/layout/Layout';\nimport LoadingSpinner from './components/UI/LoadingSpinner';\nimport AdminPage from './pages/AdminPage';\nimport Cycles from './pages/Cycles';\nimport AuthContext from './store/auth-context';\n// import useHttp from './components/hooks/use-http';\n// import { checkUser } from './components/lib/api';\n\nfunction App() {\n  const NotFound = React.lazy(() => import('./pages/NotFound'));\n  const ProfilePage = React.lazy(() => import('./pages/ProfilePage'));\n  const AuthPage = React.lazy(() => import('./pages/AuthPage'));\n  const Rent = React.lazy(() => import('./pages/Rent'));\n  const Signup = React.lazy(() => import('./pages/Signup'));\n\n  const authCtx = useContext(AuthContext);\n  const history = useHistory();\n\n  // let { sendRequest, status, data: cycle, error } = useHttp(checkUser, false);\n\n  const [isAdmin, setIsAdmin] = useState(false);\n  const loggedIn = authCtx.isLoggedIn;\n  const data = authCtx.data;\n  // useEffect(() => {\n  //   if (loggedIn) {\n  //     sendRequest({\n  //       userid: authCtx.userid,\n  //     });\n  //     authCtx.login(data, data.token, data._id, data.role, data.cycleid);\n  //   }\n  // });\n\n  useEffect(() => {\n    if (authCtx.role === 'admin') {\n      setIsAdmin(true);\n    } else {\n      setIsAdmin(false);\n    }\n  }, [isAdmin, authCtx.role, authCtx]);\n\n  return (\n    <Layout>\n      <Suspense\n        fallback={\n          <div className=\"centered\">\n            <LoadingSpinner />\n          </div>\n        }\n      >\n        <Switch>\n          <Route path=\"/\" exact>\n            {loggedIn && <Redirect to=\"/mainPage\" />}\n            {!loggedIn && <Redirect to=\"/auth\" />}\n          </Route>\n          <Route path=\"/signup\">\n            {loggedIn && <Redirect to=\"/mainPage\" />}\n            {!loggedIn && <Signup />}\n          </Route>\n          <Route path=\"/auth\">\n            {loggedIn && <Redirect to=\"/mainPage\" />}\n            {!loggedIn && <AuthPage />}\n          </Route>\n          <Route path=\"/mainPage\">\n            {loggedIn && <ProfilePage user={data} />}\n            {!loggedIn && <Redirect to=\"/auth\" />}\n          </Route>\n          <Route path=\"/rent\">\n            {loggedIn && <Rent user={data} />}\n            {!loggedIn && <Redirect to=\"/auth\" />}\n          </Route>\n          <Route path=\"/admin\">\n            {loggedIn && isAdmin && <AdminPage user={data} />}\n            {loggedIn && !isAdmin && <Redirect to=\"/auth\" />}\n            {!loggedIn && !isAdmin && <Redirect to=\"/auth\" />}\n          </Route>\n          <Route path=\"/cycles\">\n            <Cycles />\n          </Route>\n          <Route path=\"*\">\n            <NotFound />\n          </Route>\n        </Switch>\n      </Suspense>\n    </Layout>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}