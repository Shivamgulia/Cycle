{"ast":null,"code":"import _slicedToArray from\"/Users/shivamgulia/Developer/Green Riders/JS/cycle/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,Suspense,useState,useEffect}from'react';import{Route,Switch,Redirect,useHistory}from'react-router-dom';import Layout from'./components/layout/Layout';import LoadingSpinner from'./components/UI/LoadingSpinner';import AdminPage from'./pages/AdminPage';import Cycles from'./pages/Cycles';import AuthContext from'./store/auth-context';import useHttp from'./components/hooks/use-http';import{checkUser}from'./components/lib/api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){// const QuoteDetails = React.lazy(() => import('./pages/QuoteDetails'));\n// const NewQuote = React.lazy(() => import('./pages/NewQuote'));\n// const AllQuotes = React.lazy(() => import('./pages/AllQuotes'));\nvar NotFound=/*#__PURE__*/React.lazy(function(){return import('./pages/NotFound');});var ProfilePage=/*#__PURE__*/React.lazy(function(){return import('./pages/ProfilePage');});var AuthPage=/*#__PURE__*/React.lazy(function(){return import('./pages/AuthPage');});var Rent=/*#__PURE__*/React.lazy(function(){return import('./pages/Rent');});var authCtx=useContext(AuthContext);var history=useHistory();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isAdmin=_useState2[0],setIsAdmin=_useState2[1];var loggedIn=authCtx.isLoggedIn;var data=authCtx.data;var _useHttp=useHttp(checkUser,false),sendRequest=_useHttp.sendRequest,status=_useHttp.status,error=_useHttp.error;useEffect(function(){if(authCtx.isLoggedIn){// sendRequest({ email: authCtx.email, password: authCtx.password });\nif(error){authCtx.logout();}history.replace('/');}},[authCtx,authCtx.email,authCtx.password,sendRequest,authCtx.isLoggedIn,history,data,error]);useEffect(function(){if(authCtx.role==='admin'){setIsAdmin(true);}else{setIsAdmin(false);}},[isAdmin,authCtx.role,authCtx]);if(status==='pending'){return/*#__PURE__*/_jsx(\"div\",{className:\"centered\",children:/*#__PURE__*/_jsx(LoadingSpinner,{})});}if(error){return/*#__PURE__*/_jsx(\"p\",{className:\"centered\",children:error});}return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(Suspense,{fallback:/*#__PURE__*/_jsx(\"div\",{className:\"centered\",children:/*#__PURE__*/_jsx(LoadingSpinner,{})}),children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsxs(Route,{path:\"/\",exact:true,children:[loggedIn&&/*#__PURE__*/_jsx(Redirect,{to:\"/mainPage\"}),!loggedIn&&/*#__PURE__*/_jsx(Redirect,{to:\"/auth\"})]}),/*#__PURE__*/_jsxs(Route,{path:\"/auth\",children:[loggedIn&&/*#__PURE__*/_jsx(Redirect,{to:\"/mainPage\"}),!loggedIn&&/*#__PURE__*/_jsx(AuthPage,{})]}),/*#__PURE__*/_jsxs(Route,{path:\"/mainPage\",children:[loggedIn&&/*#__PURE__*/_jsx(ProfilePage,{user:data}),!loggedIn&&/*#__PURE__*/_jsx(Redirect,{to:\"/auth\"})]}),/*#__PURE__*/_jsxs(Route,{path:\"/rent\",children:[loggedIn&&/*#__PURE__*/_jsx(Rent,{user:data}),!loggedIn&&/*#__PURE__*/_jsx(Redirect,{to:\"/auth\"})]}),/*#__PURE__*/_jsxs(Route,{path:\"/admin\",children:[loggedIn&&isAdmin&&/*#__PURE__*/_jsx(AdminPage,{user:data}),loggedIn&&!isAdmin&&/*#__PURE__*/_jsx(Redirect,{to:\"/auth\"}),!loggedIn&&!isAdmin&&/*#__PURE__*/_jsx(Redirect,{to:\"/auth\"})]}),/*#__PURE__*/_jsxs(Route,{path:\"/cycles\",children:[loggedIn&&/*#__PURE__*/_jsx(Cycles,{}),!loggedIn&&/*#__PURE__*/_jsx(Redirect,{to:\"/auth\"})]}),/*#__PURE__*/_jsx(Route,{path:\"*\",children:/*#__PURE__*/_jsx(NotFound,{})})]})})});}export default App;","map":{"version":3,"sources":["/Users/shivamgulia/Developer/Green Riders/JS/cycle/src/App.js"],"names":["React","useContext","Suspense","useState","useEffect","Route","Switch","Redirect","useHistory","Layout","LoadingSpinner","AdminPage","Cycles","AuthContext","useHttp","checkUser","App","NotFound","lazy","ProfilePage","AuthPage","Rent","authCtx","history","isAdmin","setIsAdmin","loggedIn","isLoggedIn","data","sendRequest","status","error","logout","replace","email","password","role"],"mappings":"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","sourcesContent":["import React, { useContext, Suspense, useState, useEffect } from 'react';\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom';\n\nimport Layout from './components/layout/Layout';\nimport LoadingSpinner from './components/UI/LoadingSpinner';\nimport AdminPage from './pages/AdminPage';\nimport Cycles from './pages/Cycles';\nimport AuthContext from './store/auth-context';\nimport useHttp from './components/hooks/use-http';\nimport { checkUser } from './components/lib/api';\n\nfunction App() {\n  // const QuoteDetails = React.lazy(() => import('./pages/QuoteDetails'));\n  // const NewQuote = React.lazy(() => import('./pages/NewQuote'));\n  // const AllQuotes = React.lazy(() => import('./pages/AllQuotes'));\n  const NotFound = React.lazy(() => import('./pages/NotFound'));\n  const ProfilePage = React.lazy(() => import('./pages/ProfilePage'));\n  const AuthPage = React.lazy(() => import('./pages/AuthPage'));\n  const Rent = React.lazy(() => import('./pages/Rent'));\n\n  const authCtx = useContext(AuthContext);\n  const history = useHistory();\n\n  const [isAdmin, setIsAdmin] = useState(false);\n  const loggedIn = authCtx.isLoggedIn;\n  const data = authCtx.data;\n  const { sendRequest, status, error } = useHttp(checkUser, false);\n  useEffect(() => {\n    if (authCtx.isLoggedIn) {\n      // sendRequest({ email: authCtx.email, password: authCtx.password });\n      if (error) {\n        authCtx.logout();\n      }\n      history.replace('/');\n    }\n  }, [\n    authCtx,\n    authCtx.email,\n    authCtx.password,\n    sendRequest,\n    authCtx.isLoggedIn,\n    history,\n    data,\n    error,\n  ]);\n  useEffect(() => {\n    if (authCtx.role === 'admin') {\n      setIsAdmin(true);\n    } else {\n      setIsAdmin(false);\n    }\n  }, [isAdmin, authCtx.role, authCtx]);\n\n  if (status === 'pending') {\n    return (\n      <div className=\"centered\">\n        <LoadingSpinner />\n      </div>\n    );\n  }\n  if (error) {\n    return <p className=\"centered\">{error}</p>;\n  }\n\n  return (\n    <Layout>\n      <Suspense\n        fallback={\n          <div className=\"centered\">\n            <LoadingSpinner />\n          </div>\n        }\n      >\n        <Switch>\n          <Route path=\"/\" exact>\n            {loggedIn && <Redirect to=\"/mainPage\" />}\n            {!loggedIn && <Redirect to=\"/auth\" />}\n          </Route>\n          <Route path=\"/auth\">\n            {loggedIn && <Redirect to=\"/mainPage\" />}\n            {!loggedIn && <AuthPage />}\n          </Route>\n          <Route path=\"/mainPage\">\n            {loggedIn && <ProfilePage user={data} />}\n            {!loggedIn && <Redirect to=\"/auth\" />}\n          </Route>\n          <Route path=\"/rent\">\n            {loggedIn && <Rent user={data} />}\n            {!loggedIn && <Redirect to=\"/auth\" />}\n          </Route>\n          <Route path=\"/admin\">\n            {loggedIn && isAdmin && <AdminPage user={data} />}\n            {loggedIn && !isAdmin && <Redirect to=\"/auth\" />}\n            {!loggedIn && !isAdmin && <Redirect to=\"/auth\" />}\n          </Route>\n          <Route path=\"/cycles\">\n            {loggedIn && <Cycles />}\n            {!loggedIn && <Redirect to=\"/auth\" />}\n          </Route>\n          <Route path=\"*\">\n            <NotFound />\n          </Route>\n        </Switch>\n      </Suspense>\n    </Layout>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}