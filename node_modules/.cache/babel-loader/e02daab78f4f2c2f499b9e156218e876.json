{"ast":null,"code":"import _slicedToArray from\"/Users/shivamgulia/Developer/Green Riders/JS/cycle/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useContext,useEffect,useState}from'react';import{useHistory}from'react-router-dom';import Scanner from'../components/QrScaner/Scanner';import{rentCycle}from'../components/lib/api';import useHttp from'../components/hooks/use-http';import Button from'../components/UI/Button';import AuthContext from'../store/auth-context';import LoadingSpinner from'../components/UI/LoadingSpinner';import classes from'./Rent.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Rent=function Rent(props){var history=useHistory();var authCtx=useContext(AuthContext);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),done=_useState4[0],setDone=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),rent=_useState6[0],setRent=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),one=_useState8[0],setOne=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),two=_useState10[0],setTwo=_useState10[1];//   console.log(authCtx);\nvar _useHttp=useHttp(rentCycle,false),sendRequest=_useHttp.sendRequest,status=_useHttp.status,cycle=_useHttp.data,error=_useHttp.error;var rentHandler=function rentHandler(){sendRequest({token:authCtx.token,cycleid:data,userid:authCtx.userid,role:authCtx.role});if(!two)authCtx.addCycle(data);// console.log(cycle);\n};useEffect(function(){if(authCtx.role==='admin'){setOne(true);}if(authCtx.role==='guard'){setTwo(true);}if(localStorage.getItem('cycleid')===''){setRent(true);}},[authCtx,authCtx.role]);//   console.log({ user: localStorage.getItem('data') });\nif(status==='pending'){return/*#__PURE__*/_jsx(\"div\",{className:\"centered\",children:/*#__PURE__*/_jsx(LoadingSpinner,{})});}if(error){return/*#__PURE__*/_jsx(\"p\",{className:\"centered\",children:error});}if(status==='completed'){return/*#__PURE__*/_jsxs(\"div\",{className:\"centered\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h1\",{className:\"centered\",children:two?'Cycle Returned':'Cycle Rented'})}),/*#__PURE__*/_jsx(\"div\",{children:two&&/*#__PURE__*/_jsx(Button,{click:function click(){history.go(0);},children:\"Return Another Cycle\"})})]});}var ScanComplete=function ScanComplete(props){setData(props);setDone(true);};return/*#__PURE__*/_jsxs(\"div\",{className:classes.body,children:[!one&&!two&&/*#__PURE__*/_jsxs(\"div\",{className:classes.comp,children:[!rent&&/*#__PURE__*/_jsx(\"h1\",{className:\"centered\",children:\"You have already rented one Cycle\"}),rent&&/*#__PURE__*/_jsxs(_Fragment,{children:[!done&&/*#__PURE__*/_jsx(Scanner,{scan:ScanComplete}),data&&/*#__PURE__*/_jsx(\"p\",{className:classes.p,children:data}),done&&/*#__PURE__*/_jsx(Button,{click:rentHandler,children:\"Rent\"})]})]}),two&&/*#__PURE__*/_jsxs(\"div\",{className:classes.comp,children:[!done&&/*#__PURE__*/_jsx(Scanner,{scan:ScanComplete}),data&&/*#__PURE__*/_jsx(\"p\",{className:classes.p,children:data}),done&&/*#__PURE__*/_jsx(Button,{click:rentHandler,children:\"Return\"})]}),one&&!two&&/*#__PURE__*/_jsxs(\"div\",{className:classes.comp,children:[!done&&/*#__PURE__*/_jsx(Scanner,{scan:ScanComplete}),data&&/*#__PURE__*/_jsx(\"p\",{className:classes.p,children:data}),done&&/*#__PURE__*/_jsx(Button,{click:rentHandler,children:\"Admin\"})]})]});};export default Rent;","map":{"version":3,"sources":["/Users/shivamgulia/Developer/Green Riders/JS/cycle/src/pages/Rent.js"],"names":["useContext","useEffect","useState","useHistory","Scanner","rentCycle","useHttp","Button","AuthContext","LoadingSpinner","classes","Rent","props","history","authCtx","data","setData","done","setDone","rent","setRent","one","setOne","two","setTwo","sendRequest","status","cycle","error","rentHandler","token","cycleid","userid","role","addCycle","localStorage","getItem","go","ScanComplete","body","comp","p"],"mappings":"wIAAA,OAASA,UAAT,CAAqBC,SAArB,CAAgCC,QAAhC,KAAgD,OAAhD,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,OAAP,KAAoB,gCAApB,CACA,OAASC,SAAT,KAA0B,uBAA1B,CACA,MAAOC,CAAAA,OAAP,KAAoB,8BAApB,CACA,MAAOC,CAAAA,MAAP,KAAmB,yBAAnB,CACA,MAAOC,CAAAA,WAAP,KAAwB,uBAAxB,CACA,MAAOC,CAAAA,cAAP,KAA2B,iCAA3B,CACA,MAAOC,CAAAA,OAAP,KAAoB,mBAApB,C,6IAEA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,CAACC,KAAD,CAAW,CACtB,GAAMC,CAAAA,OAAO,CAAGV,UAAU,EAA1B,CACA,GAAMW,CAAAA,OAAO,CAAGd,UAAU,CAACQ,WAAD,CAA1B,CACA,cAAwBN,QAAQ,CAAC,IAAD,CAAhC,wCAAOa,IAAP,eAAaC,OAAb,eACA,eAAwBd,QAAQ,CAAC,KAAD,CAAhC,yCAAOe,IAAP,eAAaC,OAAb,eACA,eAAwBhB,QAAQ,CAAC,KAAD,CAAhC,yCAAOiB,IAAP,eAAaC,OAAb,eACA,eAAsBlB,QAAQ,CAAC,KAAD,CAA9B,yCAAOmB,GAAP,eAAYC,MAAZ,eACA,eAAsBpB,QAAQ,CAAC,KAAD,CAA9B,0CAAOqB,GAAP,gBAAYC,MAAZ,gBAEA;AAEA,aAAkDlB,OAAO,CAACD,SAAD,CAAY,KAAZ,CAAzD,CAAMoB,WAAN,UAAMA,WAAN,CAAmBC,MAAnB,UAAmBA,MAAnB,CAAiCC,KAAjC,UAA2BZ,IAA3B,CAAwCa,KAAxC,UAAwCA,KAAxC,CACA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACxBJ,WAAW,CAAC,CACVK,KAAK,CAAEhB,OAAO,CAACgB,KADL,CAEVC,OAAO,CAAEhB,IAFC,CAGViB,MAAM,CAAElB,OAAO,CAACkB,MAHN,CAIVC,IAAI,CAAEnB,OAAO,CAACmB,IAJJ,CAAD,CAAX,CAMA,GAAI,CAACV,GAAL,CAAUT,OAAO,CAACoB,QAAR,CAAiBnB,IAAjB,EACV;AACD,CATD,CAUAd,SAAS,CAAC,UAAM,CACd,GAAIa,OAAO,CAACmB,IAAR,GAAiB,OAArB,CAA8B,CAC5BX,MAAM,CAAC,IAAD,CAAN,CACD,CACD,GAAIR,OAAO,CAACmB,IAAR,GAAiB,OAArB,CAA8B,CAC5BT,MAAM,CAAC,IAAD,CAAN,CACD,CACD,GAAIW,YAAY,CAACC,OAAb,CAAqB,SAArB,IAAoC,EAAxC,CAA4C,CAC1ChB,OAAO,CAAC,IAAD,CAAP,CACD,CACF,CAVQ,CAUN,CAACN,OAAD,CAAUA,OAAO,CAACmB,IAAlB,CAVM,CAAT,CAWA;AACA,GAAIP,MAAM,GAAK,SAAf,CAA0B,CACxB,mBACE,YAAK,SAAS,CAAC,UAAf,uBACE,KAAC,cAAD,IADF,EADF,CAKD,CACD,GAAIE,KAAJ,CAAW,CACT,mBAAO,UAAG,SAAS,CAAC,UAAb,UAAyBA,KAAzB,EAAP,CACD,CACD,GAAIF,MAAM,GAAK,WAAf,CAA4B,CAC1B,mBACE,aAAK,SAAS,CAAC,UAAf,wBACE,kCACE,WAAI,SAAS,CAAC,UAAd,UACGH,GAAG,CAAG,gBAAH,CAAsB,cAD5B,EADF,EADF,cAME,qBACGA,GAAG,eACF,KAAC,MAAD,EACE,KAAK,CAAE,gBAAM,CACXV,OAAO,CAACwB,EAAR,CAAW,CAAX,EACD,CAHH,kCAFJ,EANF,GADF,CAoBD,CAED,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAC1B,KAAD,CAAW,CAC9BI,OAAO,CAACJ,KAAD,CAAP,CACAM,OAAO,CAAC,IAAD,CAAP,CACD,CAHD,CAIA,mBACE,aAAK,SAAS,CAAER,OAAO,CAAC6B,IAAxB,WACG,CAAClB,GAAD,EAAQ,CAACE,GAAT,eACC,aAAK,SAAS,CAAEb,OAAO,CAAC8B,IAAxB,WACG,CAACrB,IAAD,eACC,WAAI,SAAS,CAAC,UAAd,+CAFJ,CAIGA,IAAI,eACH,2BACG,CAACF,IAAD,eAAS,KAAC,OAAD,EAAS,IAAI,CAAEqB,YAAf,EADZ,CAEGvB,IAAI,eAAI,UAAG,SAAS,CAAEL,OAAO,CAAC+B,CAAtB,UAA0B1B,IAA1B,EAFX,CAGGE,IAAI,eAAI,KAAC,MAAD,EAAQ,KAAK,CAAEY,WAAf,kBAHX,GALJ,GAFJ,CAeGN,GAAG,eACF,aAAK,SAAS,CAAEb,OAAO,CAAC8B,IAAxB,WACG,CAACvB,IAAD,eAAS,KAAC,OAAD,EAAS,IAAI,CAAEqB,YAAf,EADZ,CAEGvB,IAAI,eAAI,UAAG,SAAS,CAAEL,OAAO,CAAC+B,CAAtB,UAA0B1B,IAA1B,EAFX,CAGGE,IAAI,eAAI,KAAC,MAAD,EAAQ,KAAK,CAAEY,WAAf,oBAHX,GAhBJ,CAsBGR,GAAG,EAAI,CAACE,GAAR,eACC,aAAK,SAAS,CAAEb,OAAO,CAAC8B,IAAxB,WACG,CAACvB,IAAD,eAAS,KAAC,OAAD,EAAS,IAAI,CAAEqB,YAAf,EADZ,CAEGvB,IAAI,eAAI,UAAG,SAAS,CAAEL,OAAO,CAAC+B,CAAtB,UAA0B1B,IAA1B,EAFX,CAGGE,IAAI,eAAI,KAAC,MAAD,EAAQ,KAAK,CAAEY,WAAf,mBAHX,GAvBJ,GADF,CAgCD,CAvGD,CAyGA,cAAelB,CAAAA,IAAf","sourcesContent":["import { useContext, useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Scanner from '../components/QrScaner/Scanner';\nimport { rentCycle } from '../components/lib/api';\nimport useHttp from '../components/hooks/use-http';\nimport Button from '../components/UI/Button';\nimport AuthContext from '../store/auth-context';\nimport LoadingSpinner from '../components/UI/LoadingSpinner';\nimport classes from './Rent.module.css';\n\nconst Rent = (props) => {\n  const history = useHistory();\n  const authCtx = useContext(AuthContext);\n  const [data, setData] = useState(null);\n  const [done, setDone] = useState(false);\n  const [rent, setRent] = useState(false);\n  const [one, setOne] = useState(false);\n  const [two, setTwo] = useState(false);\n\n  //   console.log(authCtx);\n\n  let { sendRequest, status, data: cycle, error } = useHttp(rentCycle, false);\n  const rentHandler = () => {\n    sendRequest({\n      token: authCtx.token,\n      cycleid: data,\n      userid: authCtx.userid,\n      role: authCtx.role,\n    });\n    if (!two) authCtx.addCycle(data);\n    // console.log(cycle);\n  };\n  useEffect(() => {\n    if (authCtx.role === 'admin') {\n      setOne(true);\n    }\n    if (authCtx.role === 'guard') {\n      setTwo(true);\n    }\n    if (localStorage.getItem('cycleid') === '') {\n      setRent(true);\n    }\n  }, [authCtx, authCtx.role]);\n  //   console.log({ user: localStorage.getItem('data') });\n  if (status === 'pending') {\n    return (\n      <div className=\"centered\">\n        <LoadingSpinner />\n      </div>\n    );\n  }\n  if (error) {\n    return <p className=\"centered\">{error}</p>;\n  }\n  if (status === 'completed') {\n    return (\n      <div className=\"centered\">\n        <div>\n          <h1 className=\"centered\">\n            {two ? 'Cycle Returned' : 'Cycle Rented'}\n          </h1>\n        </div>\n        <div>\n          {two && (\n            <Button\n              click={() => {\n                history.go(0);\n              }}\n            >\n              Return Another Cycle\n            </Button>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  const ScanComplete = (props) => {\n    setData(props);\n    setDone(true);\n  };\n  return (\n    <div className={classes.body}>\n      {!one && !two && (\n        <div className={classes.comp}>\n          {!rent && (\n            <h1 className=\"centered\">You have already rented one Cycle</h1>\n          )}\n          {rent && (\n            <>\n              {!done && <Scanner scan={ScanComplete} />}\n              {data && <p className={classes.p}>{data}</p>}\n              {done && <Button click={rentHandler}>Rent</Button>}\n            </>\n          )}\n        </div>\n      )}\n      {two && (\n        <div className={classes.comp}>\n          {!done && <Scanner scan={ScanComplete} />}\n          {data && <p className={classes.p}>{data}</p>}\n          {done && <Button click={rentHandler}>Return</Button>}\n        </div>\n      )}\n      {one && !two && (\n        <div className={classes.comp}>\n          {!done && <Scanner scan={ScanComplete} />}\n          {data && <p className={classes.p}>{data}</p>}\n          {done && <Button click={rentHandler}>Admin</Button>}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Rent;\n"]},"metadata":{},"sourceType":"module"}