{"ast":null,"code":"const url = 'https://pacific-fortress-54764.herokuapp.com';\nexport async function rentCycle(props) {\n  let response = await fetch(`${url}/cycles/${props.cycleid}`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token\n    }\n  });\n  let data = await response.json();\n  let userid = data.stdid;\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not Rent Cycle');\n  }\n\n  if (props.role === 'student' && data.status === 'rented') {\n    throw new Error('Cycle already Rented');\n  }\n\n  if (props.role === 'guard' && data.status === '') {\n    throw new Error('Cycle not Rented Yet');\n  }\n\n  let cycleid;\n\n  if (props.role === 'student') {\n    cycleid = props.cycleid;\n  }\n\n  if (props.role === 'guard') {\n    cycleid = '';\n  }\n\n  if (props.role === 'student') userid = props.userid;\n  response = await fetch(`${url}/users/${userid}`, {\n    method: 'PATCH',\n    body: JSON.stringify({\n      cycleid\n    }),\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token\n    }\n  });\n  data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not Rent Cycle.');\n  }\n\n  let user;\n  if (props.role === 'student') user = props.userid;\n  if (props.role === 'guard') user = '';\n  let name;\n  if (props.role === 'student') name = 'shivam';\n  if (props.role === 'guard') name = '';\n  let stat;\n  if (props.role === 'student') stat = 'rented';\n  if (props.role === 'guard') stat = '';\n  response = await fetch(`${url}/cycles/${props.cycleid}`, {\n    method: 'PATCH',\n    body: JSON.stringify({\n      status: stat,\n      stdid: user,\n      stdname: stdname\n    }),\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token\n    }\n  });\n  data = await response.json();\n\n  if (!response.ok) {\n    // console.log(response);\n    throw new Error(data.message || 'Could not Rent Cycle.');\n  }\n\n  console.log('rented');\n  return 'Cycle Rented';\n} //\n\nexport async function addStudent(props) {\n  let response = await fetch(`${url}/users/signup`, {\n    method: 'POST',\n    body: JSON.stringify(props.student),\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token\n    }\n  });\n  let data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not Add Student.');\n  }\n\n  return 'Student Added';\n} //\n\nexport async function deleteStudent(props) {\n  let response = await fetch(`${url}/users/${props.student.email}`, {\n    method: 'DELETE',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token\n    }\n  });\n  let data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not Delete Student.');\n  }\n\n  return 'Student Deleted';\n} //\n\nexport async function addCycle(props) {\n  let response = await fetch(`${url}/cycles/add`, {\n    method: 'POST',\n    body: JSON.stringify(props.cycle),\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token\n    }\n  });\n  let data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not Add Cycle.');\n  }\n\n  return 'Student Added';\n}\nexport async function deleteCycle(props) {\n  let response = await fetch(`${url}/cycles/${props.cycleid}`, {\n    method: 'DELETE',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token\n    }\n  });\n  let data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not Delete Cycle');\n  }\n\n  return 'Cycle Deleted';\n} //\n\nexport async function checkUser(props) {\n  const response = await fetch('https://pacific-fortress-54764.herokuapp.com/users/login', {\n    method: 'POST',\n    body: JSON.stringify({\n      email: props.email,\n      password: props.password\n    }),\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n  const data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not Rent Cycle.');\n  }\n\n  console.log(data);\n  return data;\n} //\n\nexport async function getCycles(props) {\n  let response = await fetch(`${url}/cycles/all`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token\n    }\n  });\n  let data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not fetch Cycles.');\n  }\n\n  return data;\n}","map":{"version":3,"sources":["/Users/shivamgulia/Developer/Microsoft/cycle/src/components/lib/api.js"],"names":["url","rentCycle","props","response","fetch","cycleid","method","headers","Authorization","token","data","json","userid","stdid","ok","Error","message","role","status","body","JSON","stringify","user","name","stat","stdname","console","log","addStudent","student","deleteStudent","email","addCycle","cycle","deleteCycle","checkUser","password","getCycles"],"mappings":"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","sourcesContent":["const url = 'https://pacific-fortress-54764.herokuapp.com';\n\nexport async function rentCycle(props) {\n  let response = await fetch(`${url}/cycles/${props.cycleid}`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token,\n    },\n  });\n  let data = await response.json();\n  let userid = data.stdid;\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not Rent Cycle');\n  }\n\n  if (props.role === 'student' && data.status === 'rented') {\n    throw new Error('Cycle already Rented');\n  }\n\n  if (props.role === 'guard' && data.status === '') {\n    throw new Error('Cycle not Rented Yet');\n  }\n\n  let cycleid;\n  if (props.role === 'student') {\n    cycleid = props.cycleid;\n  }\n  if (props.role === 'guard') {\n    cycleid = '';\n  }\n\n  if (props.role === 'student') userid = props.userid;\n  response = await fetch(`${url}/users/${userid}`, {\n    method: 'PATCH',\n    body: JSON.stringify({ cycleid }),\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token,\n    },\n  });\n\n  data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not Rent Cycle.');\n  }\n\n  let user;\n  if (props.role === 'student') user = props.userid;\n  if (props.role === 'guard') user = '';\n\n  let name;\n  if (props.role === 'student') name = 'shivam';\n  if (props.role === 'guard') name = '';\n\n  let stat;\n  if (props.role === 'student') stat = 'rented';\n  if (props.role === 'guard') stat = '';\n\n  response = await fetch(`${url}/cycles/${props.cycleid}`, {\n    method: 'PATCH',\n    body: JSON.stringify({ status: stat, stdid: user, stdname: stdname }),\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token,\n    },\n  });\n\n  data = await response.json();\n\n  if (!response.ok) {\n    // console.log(response);\n    throw new Error(data.message || 'Could not Rent Cycle.');\n  }\n\n  console.log('rented');\n  return 'Cycle Rented';\n}\n\n//\n\nexport async function addStudent(props) {\n  let response = await fetch(`${url}/users/signup`, {\n    method: 'POST',\n    body: JSON.stringify(props.student),\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token,\n    },\n  });\n  let data = await response.json();\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not Add Student.');\n  }\n\n  return 'Student Added';\n}\n\n//\n\nexport async function deleteStudent(props) {\n  let response = await fetch(`${url}/users/${props.student.email}`, {\n    method: 'DELETE',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token,\n    },\n  });\n  let data = await response.json();\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not Delete Student.');\n  }\n\n  return 'Student Deleted';\n}\n\n//\n\nexport async function addCycle(props) {\n  let response = await fetch(`${url}/cycles/add`, {\n    method: 'POST',\n    body: JSON.stringify(props.cycle),\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token,\n    },\n  });\n  let data = await response.json();\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not Add Cycle.');\n  }\n\n  return 'Student Added';\n}\n\nexport async function deleteCycle(props) {\n  let response = await fetch(`${url}/cycles/${props.cycleid}`, {\n    method: 'DELETE',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token,\n    },\n  });\n  let data = await response.json();\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not Delete Cycle');\n  }\n\n  return 'Cycle Deleted';\n}\n\n//\n\nexport async function checkUser(props) {\n  const response = await fetch(\n    'https://pacific-fortress-54764.herokuapp.com/users/login',\n    {\n      method: 'POST',\n      body: JSON.stringify({\n        email: props.email,\n        password: props.password,\n      }),\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    }\n  );\n\n  const data = await response.json();\n\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not Rent Cycle.');\n  }\n\n  console.log(data);\n  return data;\n}\n\n//\n\nexport async function getCycles(props) {\n  let response = await fetch(`${url}/cycles/all`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + props.token,\n    },\n  });\n  let data = await response.json();\n  if (!response.ok) {\n    throw new Error(data.message || 'Could not fetch Cycles.');\n  }\n\n  return data;\n}\n"]},"metadata":{},"sourceType":"module"}