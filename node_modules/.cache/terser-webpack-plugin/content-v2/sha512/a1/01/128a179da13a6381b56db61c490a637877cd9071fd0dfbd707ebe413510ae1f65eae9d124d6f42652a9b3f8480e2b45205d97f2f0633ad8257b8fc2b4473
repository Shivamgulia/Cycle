{"code":"(this[\"webpackJsonpreact-complete-guide\"]=this[\"webpackJsonpreact-complete-guide\"]||[]).push([[4],{71:function(e,t,n){e.exports={auth:\"AuthForm_auth__2ZSKH\",control:\"AuthForm_control__1evQ4\",actions:\"AuthForm_actions__25Vmz\",toggle:\"AuthForm_toggle__1Wxr6\"}},76:function(e,t,n){\"use strict\";n.r(t);var c=n(2),s=n(1),r=n(6),i=n(30),o=n(5),a=n(71),u=n.n(a),l=n(0),j=function(){var e=Object(r.g)(),t=Object(s.useState)(!1),n=Object(c.a)(t,2),a=n[0],j=n[1],b=Object(s.useState)(!1),h=Object(c.a)(b,2),d=h[0],O=h[1],p=Object(s.useContext)(o.b),m=Object(s.useRef)(),f=Object(s.useRef)(),g=Object(s.useState)(!1),x=Object(c.a)(g,2),w=x[0],v=x[1];return Object(l.jsxs)(\"section\",{className:u.a.auth,children:[Object(l.jsx)(\"h1\",{children:\"Login\"}),Object(l.jsxs)(\"form\",{onSubmit:function(t){if(t.preventDefault(),a){var n=m.current.value,c=f.current.value;v(!0),\"https://cycle-api.azurewebsites.net/users/login\",fetch(\"https://cycle-api.azurewebsites.net/users/login\",{method:\"POST\",body:JSON.stringify({email:n,password:c}),headers:{\"Content-Type\":\"application/json\"}}).then((function(e){return v(!1),e.ok?e.json():e.json().then((function(e){var t=\"Authentication Failed\";throw e&&e.error&&e.error.message&&(v(!1),t=e.error.message),new Error(t)}))})).then((function(t){var n=new Date((new Date).getTime()+36e6);p.login(t,c,t.token,t._id,t.role,t.cycleid,n.toISOString()),e.replace(\"/\")})).catch((function(e){alert(e.message)}))}else alert(\"Verify if you are human\")},children:[Object(l.jsxs)(\"div\",{className:u.a.control,children:[Object(l.jsx)(\"label\",{htmlFor:\"email\",children:\"Your Email\"}),Object(l.jsx)(\"input\",{type:\"userName\",id:\"userName\",required:!0,ref:m})]}),Object(l.jsxs)(\"div\",{className:u.a.control,children:[Object(l.jsx)(\"label\",{htmlFor:\"password\",children:\"Your Password\"}),Object(l.jsx)(\"input\",{type:d?\"text\":\"password\",id:\"password\",required:!0,ref:f})]}),Object(l.jsx)(\"input\",{type:\"checkbox\",onClick:function(){d&&O(!1),d||O(!0)}}),\" Show Password\",Object(l.jsx)(\"div\",{children:Object(l.jsx)(i.a,{sitekey:\"6LcU0VQjAAAAAHdKzj2Ub7RAbfQCf6QXbgOif9Le\",onChange:function(e){j(!0)}})}),Object(l.jsxs)(\"div\",{className:u.a.actions,children:[!w&&Object(l.jsx)(\"button\",{children:\"Login\"}),w&&Object(l.jsx)(\"p\",{children:\"Sending Request....\"})]})]}),Object(l.jsx)(\"div\",{className:u.a.actions,children:Object(l.jsx)(\"button\",{onClick:function(){e.push(\"/signup\")},children:\" Sign Up\"})})]})};t.default=function(){return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(j,{})})}}}]);","name":"static/js/4.f143534f.chunk.js","map":{"version":3,"sources":["static/js/4.f143534f.chunk.js"],"names":["this","push","module","exports","__webpack_require__","auth","control","actions","toggle","__webpack_exports__","r","slicedToArray","react","react_router","esm","auth_context","AuthForm_module","AuthForm_module_default","n","jsx_runtime","auth_AuthForm","history","Object","_useState","_useState2","isVerified","setIsVerified","_useState3","_useState4","showPassword","setShowPassword","authCtx","emailInputRef","passwordInputRef","_useState5","_useState6","isLoading","setIsLoading","className","a","children","onSubmit","event","preventDefault","enteredEmail","current","value","enteredPassword","fetch","method","body","JSON","stringify","email","password","headers","then","res","ok","json","data","errorMessage","error","message","Error","experationTime","Date","getTime","login","token","_id","role","cycleid","toISOString","replace","catch","err","alert","htmlFor","type","id","required","ref","onClick","sitekey","onChange"],"mappings":"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"},"input":"(this[\"webpackJsonpreact-complete-guide\"] = this[\"webpackJsonpreact-complete-guide\"] || []).push([[4],{\n\n/***/ 71:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\nmodule.exports = {\"auth\":\"AuthForm_auth__2ZSKH\",\"control\":\"AuthForm_control__1evQ4\",\"actions\":\"AuthForm_actions__25Vmz\",\"toggle\":\"AuthForm_toggle__1Wxr6\"};\n\n/***/ }),\n\n/***/ 76:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 5 modules\nvar slicedToArray = __webpack_require__(2);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(1);\n\n// EXTERNAL MODULE: ./node_modules/react-router/esm/react-router.js\nvar react_router = __webpack_require__(6);\n\n// EXTERNAL MODULE: ./node_modules/react-google-recaptcha/lib/esm/index.js + 3 modules\nvar esm = __webpack_require__(30);\n\n// EXTERNAL MODULE: ./src/store/auth-context.js\nvar auth_context = __webpack_require__(5);\n\n// EXTERNAL MODULE: ./src/components/auth/AuthForm.module.css\nvar AuthForm_module = __webpack_require__(71);\nvar AuthForm_module_default = /*#__PURE__*/__webpack_require__.n(AuthForm_module);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(0);\n\n// CONCATENATED MODULE: ./src/components/auth/AuthForm.js\nvar AuthForm_AuthForm=function AuthForm(){var history=Object(react_router[\"g\" /* useHistory */])();var _useState=Object(react[\"useState\"])(false),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),isVerified=_useState2[0],setIsVerified=_useState2[1];var _useState3=Object(react[\"useState\"])(false),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),showPassword=_useState4[0],setShowPassword=_useState4[1];var authCtx=Object(react[\"useContext\"])(auth_context[\"b\" /* default */]);var emailInputRef=Object(react[\"useRef\"])();var passwordInputRef=Object(react[\"useRef\"])();var _useState5=Object(react[\"useState\"])(false),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];function onChange(value){setIsVerified(true);// console.log('Captcha value:', value);\n}// const verifyCallback = () => {\n//   setIsVerified(true);\n// };\n// const load = () => {\n//   setIsVerified(false);\n// };\nvar toggleShowPassword=function toggleShowPassword(){if(showPassword)setShowPassword(false);if(!showPassword)setShowPassword(true);};var submitionHandler=function submitionHandler(event){event.preventDefault();if(isVerified){var enteredEmail=emailInputRef.current.value;var enteredPassword=passwordInputRef.current.value;setIsLoading(true);var url;url='https://cycle-api.azurewebsites.net/users/login';//login send req url\nfetch(url,{method:'POST',body:JSON.stringify({email:enteredEmail,password:enteredPassword}),headers:{'Content-Type':'application/json'}}).then(function(res){setIsLoading(false);if(res.ok){return res.json();}else{return res.json().then(function(data){var errorMessage='Authentication Failed';if(data&&data.error&&data.error.message){setIsLoading(false);errorMessage=data.error.message;}throw new Error(errorMessage);});}}).then(function(data){var experationTime=new Date(new Date().getTime()+ +36000000);authCtx.login(data,enteredPassword,data.token,data._id,data.role,data.cycleid,experationTime.toISOString());history.replace('/');}).catch(function(err){alert(err.message);});}else{alert('Verify if you are human');}};var signupHandler=function signupHandler(){history.push('/signup');};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"section\",{className:AuthForm_module_default.a.auth,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h1\",{children:\"Login\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"form\",{onSubmit:submitionHandler,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:AuthForm_module_default.a.control,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\",{htmlFor:\"email\",children:\"Your Email\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"userName\",id:\"userName\",required:true,ref:emailInputRef})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:AuthForm_module_default.a.control,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\",{htmlFor:\"password\",children:\"Your Password\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:showPassword?'text':'password',id:\"password\",required:true,ref:passwordInputRef})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"checkbox\",onClick:toggleShowPassword}),\" Show Password\",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(esm[\"a\" /* default */],{sitekey:\"6LcU0VQjAAAAAHdKzj2Ub7RAbfQCf6QXbgOif9Le\",onChange:onChange})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:AuthForm_module_default.a.actions,children:[!isLoading&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{children:\"Login\"}),isLoading&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:\"Sending Request....\"})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:AuthForm_module_default.a.actions,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{onClick:signupHandler,children:\" Sign Up\"})})]});};/* harmony default export */ var auth_AuthForm = (AuthForm_AuthForm);\n// CONCATENATED MODULE: ./src/pages/AuthPage.js\nvar AuthPage_AuthPage=function AuthPage(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(auth_AuthForm,{})});};/* harmony default export */ var pages_AuthPage = __webpack_exports__[\"default\"] = (AuthPage_AuthPage);\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["/Users/shivamgulia/Developer/Microsoft/Green Rides/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-5-0!/Users/shivamgulia/Developer/Microsoft/Green Rides/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-5-1!/Users/shivamgulia/Developer/Microsoft/Green Rides/node_modules/postcss-loader/src/index.js??postcss!/Users/shivamgulia/Developer/Microsoft/Green Rides/src/components/auth/AuthForm.module.css","/Users/shivamgulia/Developer/Microsoft/Green Rides/src/components/auth/AuthForm.js","/Users/shivamgulia/Developer/Microsoft/Green Rides/src/pages/AuthPage.js"],"names":["AuthForm","history","useHistory","useState","isVerified","setIsVerified","showPassword","setShowPassword","authCtx","useContext","AuthContext","emailInputRef","useRef","passwordInputRef","isLoading","setIsLoading","onChange","value","toggleShowPassword","submitionHandler","event","preventDefault","enteredEmail","current","enteredPassword","url","fetch","method","body","JSON","stringify","email","password","headers","then","res","ok","json","data","errorMessage","error","message","Error","experationTime","Date","getTime","login","token","_id","role","cycleid","toISOString","replace","catch","err","alert","signupHandler","push","classes","auth","control","actions","AuthPage"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"auth\":\"AuthForm_auth__2ZSKH\",\"control\":\"AuthForm_control__1evQ4\",\"actions\":\"AuthForm_actions__25Vmz\",\"toggle\":\"AuthForm_toggle__1Wxr6\"};","import { useState, useRef, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport ReCAPTCHA from 'react-google-recaptcha';\n\nimport AuthContext from '../../store/auth-context';\nimport classes from './AuthForm.module.css';\n\nconst AuthForm = () => {\n  const history = useHistory();\n\n  const [isVerified, setIsVerified] = useState(false);\n  const [showPassword, setShowPassword] = useState(false);\n  const authCtx = useContext(AuthContext);\n\n  const emailInputRef = useRef();\n  const passwordInputRef = useRef();\n\n  const [isLoading, setIsLoading] = useState(false);\n\n  function onChange(value) {\n    setIsVerified(true);\n    // console.log('Captcha value:', value);\n  }\n\n  // const verifyCallback = () => {\n  //   setIsVerified(true);\n  // };\n  // const load = () => {\n  //   setIsVerified(false);\n  // };\n\n  const toggleShowPassword = () => {\n    if (showPassword) setShowPassword(false);\n    if (!showPassword) setShowPassword(true);\n  };\n\n  const submitionHandler = (event) => {\n    event.preventDefault();\n\n    if (isVerified) {\n      const enteredEmail = emailInputRef.current.value;\n      const enteredPassword = passwordInputRef.current.value;\n\n      setIsLoading(true);\n\n      let url;\n      url = 'https://cycle-api.azurewebsites.net/users/login'; //login send req url\n\n      fetch(url, {\n        method: 'POST',\n        body: JSON.stringify({\n          email: enteredEmail,\n          password: enteredPassword,\n        }),\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      })\n        .then((res) => {\n          setIsLoading(false);\n          if (res.ok) {\n            return res.json();\n          } else {\n            return res.json().then((data) => {\n              let errorMessage = 'Authentication Failed';\n              if (data && data.error && data.error.message) {\n                setIsLoading(false);\n                errorMessage = data.error.message;\n              }\n              throw new Error(errorMessage);\n            });\n          }\n        })\n        .then((data) => {\n          const experationTime = new Date(new Date().getTime() + +36000000);\n          authCtx.login(\n            data,\n            enteredPassword,\n            data.token,\n            data._id,\n            data.role,\n            data.cycleid,\n            experationTime.toISOString()\n          );\n          history.replace('/');\n        })\n        .catch((err) => {\n          alert(err.message);\n        });\n    } else {\n      alert('Verify if you are human');\n    }\n  };\n\n  const signupHandler = () => {\n    history.push('/signup');\n  };\n\n  return (\n    <section className={classes.auth}>\n      <h1>Login</h1>\n      <form onSubmit={submitionHandler}>\n        <div className={classes.control}>\n          <label htmlFor=\"email\">Your Email</label>\n          <input type=\"userName\" id=\"userName\" required ref={emailInputRef} />\n        </div>\n        <div className={classes.control}>\n          <label htmlFor=\"password\">Your Password</label>\n          <input\n            type={showPassword ? 'text' : 'password'}\n            id=\"password\"\n            required\n            ref={passwordInputRef}\n          />\n        </div>\n        <input type=\"checkbox\" onClick={toggleShowPassword} /> Show Password\n        <div>\n          {/* <Recaptcha\n            sitekey=\"6LfOzVQjAAAAACIJVTM3w4iuAePfdEloNCQvRhj-\"\n            render=\"explicit\"\n            verifyCallback={verifyCallback}\n            onloadCallback={load}\n          /> */}\n          <ReCAPTCHA\n            sitekey=\"6LcU0VQjAAAAAHdKzj2Ub7RAbfQCf6QXbgOif9Le\"\n            onChange={onChange}\n          />\n        </div>\n        <div className={classes.actions}>\n          {!isLoading && <button>Login</button>}\n          {isLoading && <p>Sending Request....</p>}\n        </div>\n      </form>\n      <div className={classes.actions}>\n        <button onClick={signupHandler}> Sign Up</button>\n      </div>\n    </section>\n  );\n};\n\nexport default AuthForm;\n","import AuthForm from '../components/auth/AuthForm';\n\nconst AuthPage = () => {\n  return (\n    <>\n      <AuthForm />\n    </>\n  );\n};\n\nexport default AuthPage;\n"]}}